<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xwtec.ecu.web.user.dao.IHistoryLocationDao">
	
	<select id="qryHistoryLocationByUserId" parameterType="String" resultType="com.xwtec.ecu.web.user.bean.HistoryLocationInfo">
		SELECT
	       T.USER_ID AS userId,
	       T.SECOND_CITY_ID AS secondCityId,
	       T.FIRST_CITY_ID AS firstCityId, 
	       T.THIRD_CITY_ID AS thirdCityId
	    FROM T_USER_LOCATION T WHERE T.USER_ID = #{uerId}
	</select>
	
	<insert id="insertHistoryLocation" parameterType="java.util.Map" >
		INSERT INTO T_USER_LOCATION T 
			(T.USER_ID , T.FIRST_CITY_ID) 
		VALUES (#{userId} , #{firstCityId})
	</insert>
	
	<update id="updateHistoryLocation" parameterType="java.util.Map">
		UPDATE T_USER_LOCATION T 
			<trim prefix="set" suffixOverrides=",">
				<if test="firstCityId!=null and firstCityId!=''">
					T.FIRST_CITY_ID = #{firstCityId},
				</if>
				<if test="secondCityId!=null and secondCityId!=''">
					T.SECOND_CITY_ID = #{secondCityId},
				</if>
			    <if test="thirdCityId!=null and thirdCityId!=''">
			    	T.THIRD_CITY_ID = #{thirdCityId},
			    </if>
		    </trim>
		WHERE T.USER_ID = #{userId} 
	</update>
</mapper>